
# Node FTP Server

Сборка и запуск:
```
docker build -t ftp-srv-node .
docker run -d --network host -v <local_folder>:/app/files ftp-srv-node
```

FTP сервер будет запущен на порту, указанному в файле конфигурации.

`<local_folder>` - директория хоста для хранения файлов. При этом можно запустить контейнер без параметра `-v`. Тогда файлы будут
храниться внутри контейнера.

Описание файла конфигурации `.env`:
- `HOST` - хост сервера.
- `PORT` - порт, на котором требуется запустить сервер.
- `ALLOW_ANONYMOUS` - допускать ли анонимный логин. Если указано `TRUE`, то доступ будет разрешен
для любых пользователей. Если указано `FALSE`, то следует передать параметр `USERS_FILE_PATH`.
- `USERS_FILE_PATH` - файл с логинами и паролями пользователей в описанном формате (файл, где каждая строка
username:password). Сейчас указан файл `users`. Также, в нем содержится несколько тестовых логинов и паролей.
- `LOG_FILE_PATH` - файл, куда будут логироваться события. В дальнейшем можно будет его
монтировать к контейнеру, но сейчас он создается только внутри него.

Некоторые замечания:
- События логируются в начале попытки их совершить. Если возникла ошибка, то лог останется.
Например, если при скачивании файла произошла ошибка, лог о попытке скачивания все равно будет.
- Добавил события `file:rename` т.к. имеется аналогичное на директорию.
Да и без этого информация о работе с файлами будет неполной.
-  В событиях `dir:rename` и `file:rename` поменял формат. Убрал параметр `path`, добавил параметры
`from` и `to`. Так будет ясно, какой файл переименовывали.
- В каждое событие добавил логирование даты в формате unix timestamp.
- Силами используемой библиотеки мне не удалось достать порт пользователя, только ip адрес.
Так что сейчас логируется только src_ip. Есть предположение, что порт будет доступен как часть ip адреса, но такого кейса мне поймать не удалось.
- В некоторых моментах могут возникнуть ошибки при работе с файловой системой. Сейчас они не обрабатываются, реализован пока что только положительный сценарий.
